<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buy by me Shop</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f8f9fa; margin: 0; padding: 15px; color: #212529; }
        h2 { text-align: center; font-weight: 600; margin-bottom: 20px; }
        .product-list { display: grid; gap: 15px; }
        .product-card { background: #fff; border-radius: 12px; padding: 15px; display: flex; align-items: center; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .product-info { flex-grow: 1; margin-left: 15px; }
        .product-name { font-weight: bold; font-size: 16px; }
        .product-price { color: #0088cc; font-weight: bold; margin-top: 5px; }
        button.add-btn { background: #0088cc; color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-weight: bold; }
        .order-btn { 
            position: fixed; bottom: 20px; left: 15px; right: 15px; 
            background: #28a745; color: white; border: none; border-radius: 12px; 
            padding: 18px; font-size: 16px; font-weight: bold; 
            display: none; box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
            z-index: 1000;
        }
    </style>
</head>
<body>

    <h2>üõç –ö–∞—Ç–∞–ª–æ–≥ Buy by me</h2>

    <div class="product-list">
        <div class="product-card">
            <div class="product-info">
                <div class="product-name">–ö—Ä–æ—Å—Å–æ–≤–∫–∏ Nike Air</div>
                <div class="product-price">110 ‚Ç¨</div>
            </div>
            <button class="add-btn" onclick="addToCart('Nike Air', 110)">‚ûï</button>
        </div>

        <div class="product-card">
            <div class="product-info">
                <div class="product-name">–°—É–º–∫–∞ Jacquemus</div>
                <div class="product-price">450 ‚Ç¨</div>
            </div>
            <button class="add-btn" onclick="addToCart('–°—É–º–∫–∞ Jacquemus', 450)">‚ûï</button>
        </div>
    </div>

    <button id="order-button" class="order-btn" onclick="sendOrderData()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        let tg = window.Telegram.WebApp;
        tg.expand(); // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –Ω–∞ –≤—Å–µ –æ–∫–Ω–æ

        let cart = [];

        function addToCart(name, price) {
            cart.push({ name: name, price: price });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
            let btn = document.getElementById('order-button');
            btn.style.display = 'block';
            btn.innerText = `–ó–∞–∫–∞–∑–∞—Ç—å ${cart.length} —Ç–æ–≤. –Ω–∞ —Å—É–º–º—É ${cart.reduce((a, b) => a + b.price, 0)} ‚Ç¨`;
            
            // –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MainButton —Å–∞–º–æ–≥–æ –¢–µ–ª–µ–≥—Ä–∞–º–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            tg.MainButton.text = "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑";
            tg.MainButton.show();
        }

        // –°–ê–ú–ê–Ø –í–ê–ñ–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø: –û–¢–ü–†–ê–í–ö–ê –î–ê–ù–ù–´–•
        function sendOrderData() {
            if (cart.length === 0) return;

            // –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –º–∞—Å—Å–∏–≤ –∫–æ—Ä–∑–∏–Ω—ã –≤ —Å—Ç—Ä–æ–∫—É JSON
            let dataToSend = JSON.stringify(cart);

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É (–º–µ—Ç–æ–¥ sendData —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ WebApp –æ—Ç–∫—Ä—ã—Ç —á–µ—Ä–µ–∑ KeyboardButton)
            tg.sendData(dataToSend);

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º WebApp
            tg.close();
        }

        // –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é MainButton –¢–µ–ª–µ–≥—Ä–∞–º–∞
        tg.onEvent('mainButtonClicked', function(){
            sendOrderData();
        });
    </script>
</body>
</html>
